<?xml version="1.0" encoding='UTF-8'?>
<Widget name="Star Rating" group="Collaborative" premium="true">

	<Description>Star-rate indexed documents</Description>

	<Preview>
	<![CDATA[
		<img src="/resources/widgets/starRating/img/preview.png" alt="Star-rating Preview" />
	]]>
	</Preview>

	<SupportWidgetsId arity="ZERO" />
	<SupportFeedsId arity="ONE" />
	<SupportI18N supported="true" >
		<JsKeys>
			<JsKey>unrated</JsKey>
			<JsKey>submitted</JsKey>
		</JsKeys> 
	</SupportI18N>

	<Includes>
		<Include type="js" path="/resources/javascript/storage/storage-client-0.2.js" />
		<Include type="js" path="/resources/javascript/jquery.json-2.2.js" />
		<Include type="js" path="js/starRating.js" />
		<Include type="css" path="css/style.less" />
	</Includes>

	<!-- 
		Specifies what Storage Keys are used in this widget 
		Used to selectively erase data froms storage based on widget
		and to identify potential namespace conflicts when importing widgets
	-->
	<StorageKeys>
		<StorageKey optionId="dbKey" resource="document" />
		<StorageKey optionId="exportMeta" resource="document" />
	</StorageKeys>

	<OptionsGroup name="General">
		<Option id="numStars" name="Number of stars" arity="ONE">
			<Description>Specifies the number of stars to display in the widget (max 10).</Description>		
			<Values>
				<Value>1</Value>
				<Value>2</Value>
				<Value>3</Value>
				<Value>4</Value>
				<Value>5</Value>
				<Value>6</Value>
				<Value>7</Value>
				<Value>8</Value>
				<Value>9</Value>
				<Value>10</Value>
			</Values>
		</Option>
		<Option id="increment" name="Star granularity" arity="ONE">
			<Description>Controls the granularity of the votes for each star. It slices stars into x pieces.</Description>
			<Values>
				<Value>1</Value>
				<Value>0.5</Value>
				<Value>0.25</Value>
			</Values>
		</Option>
		<Option id="rants" name="Rating hover texts" arity="ZERO_OR_ONE" isEvaluated="true">
			<Description>
				<![CDATA[
					Specifies the texts that will be displayed when hovering over stars. <br />
					These texts must be ordered from low to high rating, and must be separated by semicolons ';'.<br />
					If blank, the feature is disabled as well as the AJAX loading spinner + "Submitted!" text.
				]]>				
			</Description>
		</Option>
		<Option id="showNumVotes" name="Show number of votes" arity="ZERO_OR_ONE">
			<Description>Shows the total number of votes next to the stars. It uses the format defined below.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="numVotesFormat" name="Number of votes format" arity="ZERO_OR_ONE">
			<Description>Specifies the format of the message displaying the number of votes.</Description>			
			<Functions>
				<ContextMenu>COMMON_add("Values", ['@numvotes@'])</ContextMenu>
			</Functions>
		</Option>
		<Option id="showUnrated" name="Show 'unrated' text" arity="ONE">
			<Description>Shows 'unrated' layer on stars if no vote has been cast. </Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="showAvgAfterVote" name="After successful vote, show" arity="ONE">
			<Description>Specifies the type of message that is displayed when the vote has been cast.</Description>		
			<Values>
				<Value>Submitted rating</Value>
				<Value>Average rating</Value>
			</Values>
		</Option>
		<Option id="starWidth" name="Star width in px" arity="ONE">
			<Description>Specifies the width of the star(s) (pixels). Should not be modified unless the sprite and/or CSS have been altered.</Description>
		</Option>
		<Option id="readonly" name="Read Only" arity="ONE" isEvaluated="true">
			<Description>Displays the stars but the user can't vote.</Description>
		</Option>
	</OptionsGroup>
	
	<OptionsGroup name="Storage">
		<Option id="dbMeta" name="Identifying meta name" arity="ZERO_OR_ONE">
			<Description>
			<![CDATA[
				Specifies a uniquely identifiable meta that will be used as storage key for the document (Good candidates: url, id).<br />
				if no meta name is set, the default value is 'url' from Hit Info.
			]]>
			</Description>
			<Functions>
				<ContextMenu>Metas()</ContextMenu>
			</Functions>
		</Option>
		<Option id="dbKey" name="Storage key" arity="ONE">
			<Description>
				Specifies the database key that stores the JSON-rating.
				Change it only if you want to have more than one rating possible per document.
			</Description>
		</Option>
		<Option id="exportMeta" name="Exported meta" arity="ZERO_OR_ONE">
			<Description>
				Rating (Float E [0, MAX_STARS]) is exported under this meta name
				(RepushDocuments must be enabled in storage).
				If blank, the feature is disabled.
			</Description>
		</Option>
	</OptionsGroup>
	
	<DefaultValues>
		<DefaultValue name="numStars">4</DefaultValue>
		<DefaultValue name="increment">0.5</DefaultValue>
		<DefaultValue name="exportMeta">rating</DefaultValue>
		<DefaultValue name="dbKey">StarRating360Vote</DefaultValue>
		<DefaultValue name="rants">${i18n['bad']}; ${i18n['subpar']}; ${i18n['good']}; ${i18n['fantastic']};</DefaultValue>
		<DefaultValue name="showNumVotes">false</DefaultValue>
		<DefaultValue name="numVotesFormat">(@numvotes@ votes)</DefaultValue>
		<DefaultValue name="showUnrated">false</DefaultValue>
		<DefaultValue name="showAvgAfterVote">Submitted rating</DefaultValue>
		<DefaultValue name="starWidth">24</DefaultValue>
		<DefaultValue name="readonly">false</DefaultValue>
	</DefaultValues>
</Widget>
