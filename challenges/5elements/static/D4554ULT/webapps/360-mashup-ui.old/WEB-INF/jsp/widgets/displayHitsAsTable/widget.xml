<?xml version="1.0" encoding='UTF-8'?>
<Widget name="Result Table" group="Results Rendering">

	<Description>Displays your results in a table with a column for each meta / facet, to allow for quick overviews.</Description>

	<Includes>
		<Include type="css" path="css/style.less" />
		<Include type="js" path="/resources/javascript/exa/io/io.js" />
		<Include type="js" path="javascript/displayHitAsTable.js" />
	</Includes>

	<Dependencies>
		<Widget name="thumbnail" includeCondition="showThumbnail=true" />
		<Widget name="preview" includeCondition="showPreview=true" />
		<Widget name="download" includeCondition="showDownload=true" />
	</Dependencies>

	<Preview>
		<![CDATA[
			<div style="margin: 5px auto;">
				<table style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px; width:200px;" align="center">
					<tr style="background:#F4F4F4;">
						<th style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Thumbnail</th>
						<th style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Column 1</th>
						<th style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Column 2</th>
					</tr>
					<tr>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;"><img src="/resources/widgets/thumbnail/images/preview_thumbnail-unavailable.gif" width="60" /></td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Value A 1</td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Value A 2</td>
					</tr>
					<tr>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;"><img src="/resources/widgets/thumbnail/images/preview_thumbnail-unavailable.gif" width="60" /></td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Value B 1</td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Value B 2</td>
					</tr>
				</table>
			</div>
		]]>
	</Preview>

	<SupportWidgetsId arity="ZERO" />
	<SupportFeedsId arity="MANY" />
	<SupportI18N supported="true" />
	
	<Interactions>
		<Interaction type="in" id="exa.io.HitDecorationInterface">
			<Description>Decorate your hit.</Description>
			<Option id="hitDecorationCssSelector" name="Css path" arity="ONE">
				<Description>
				<![CDATA[
					CSS path where the decoration will be appended in the hit display.<br />
					Generally the default value does not need to be changed for the standard hit display widget.
				]]>
				</Description>
				<Functions>
					<ContextMenu>COMMON_add('Default template', [{display:'Title column',value:'tr.${entry:cleanId(entry)} .column_title'}, ])</ContextMenu>
					<ContextMenu>Eval()</ContextMenu>
				</Functions>
			</Option>
			<Option id="hitDecorationPosition" name="Decoration position" arity="ONE">
				<Description>
				<![CDATA[
					The decoration will be appended or prepended.
				]]>
				</Description>
				<Values>
					<Value></Value>
					<Value>append</Value>
					<Value>prepend</Value>
				</Values>
			</Option>
		</Interaction>
	</Interactions>

	<OptionsGroup name="Hit config">
		<Option id="hitTitle" name="Hit title" isEvaluated="true">
			<Description>Specifies the title displayed for each hit. Leave blank to use the &lt;i&gt;Title&lt;/i&gt; defined in the source feed.</Description>
		</Option>
		<Option id="hitUrl" name="Hit URL" isUrlEncoded="true" isEvaluated="true">
			<Description>Specifies the link to create for each hit title.</Description>
			<Functions>
				<ContextMenu>Pages()</ContextMenu>
				<Display>PARAMETER_doHide('', ['hitUrlTarget'], [])</Display>
			</Functions>
		</Option>
		<Option id="hitUrlTarget" name="Hit URL Target">
			<Description>Specifies where to open the action for each Hit URL</Description>
			<Values>
				<Value>Current Page</Value>
				<Value>New Page</Value>
			</Values>
		</Option>
		<Option id="showTitle" name="Display Title column" arity="ONE">
		  <Description>Adds a &lt;i&gt;Title&lt;/i&gt; column at the beginning of the table containing hit titles.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="showContent" name="Display Content column" arity="ONE">
		  <Description>Adds a &lt;i&gt;Content&lt;/i&gt; column that displays the hit Text. This is usually Summary.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="showScore" name="Display Score column" arity="ONE">
			<Description>Adds a &lt;i&gt;Score&lt;/i&gt; column that displays the hit score.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="showPreview" name="Display hit preview">
			<Description>Enables the link to CloudView's document preview feature.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="showDownload" name="Display hit download">
			<Description>Enables the link to CloudView's document download feature.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="similarUrl" name="Similar hits URL" arity="ZERO_OR_ONE" isEvaluated="true">
			<Description>Specifies an URL that will display similar hits.</Description>
			<Functions>
				<ContextMenu>PageParameters()</ContextMenu>
				<ContextMenu>Pages()</ContextMenu>
			</Functions>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Hit metas">
		<Option id="showHitMetas" name="Display metas" arity="ONE">
			<Description>Displays metas in the hit content.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('true', [], ['showEmptyMetas', 'filterMetas', 'metas', 'sortModeMetas', 'metaUrlTarget'], true, false)</Display>
			</Functions>
		</Option>
		<Option id="showEmptyMetas" name="Display empty metas" arity="ONE">
			<Description>Displays the names of metas with no (or empty) values.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="filterMetas" name="Meta filtering method" arity="ONE">
			<Description>Specifies the filtering method to apply to the metas. For the 'Exclude'and 'Include' methods, the 'Meta list' field allows to specify the metas to include or exclude.</Description>
			<Values>
				<Value>No filtering</Value>
				<Value>Exclude</Value>
				<Value>Include</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('No filtering', ['metas'], [], true, false)</Display>
			</Functions>
		</Option>
		<Option id="metas" name="Meta list">
			<Description>The specified metas, separated by commas, will be either the only ones displayed ('Include' method) or the only ones hidden ('Exclude' method).</Description>
			<Functions>
				<ContextMenu>Metas()</ContextMenu>
				<ContextMenu>COMMON_appendOnChange(', ')</ContextMenu>
			</Functions>
		</Option>
		<Option id="sortModeMetas" name="Meta sort method">
			<Description>Specifies how metas will be sorted.</Description>
			<Values>
				<Value>default</Value>
				<Value>description-asc</Value>
				<Value>description-desc</Value>
				<Value>shuffle</Value>
			</Values>
		</Option>
		<Option id="metaUrlTarget" name="Meta URL Target" isUrlEncoded="true" isEvaluated="true">
			<Description>Specifies where to open the action for meta with URL</Description>
			<Values>
				<Value>Current Page</Value>
				<Value>New Page</Value>
			</Values>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Hit facets">
		<Option id="showHitFacets" name="Display facets" arity="ONE">
			<Description>Displays facets in the hit content.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('true', [], ['hitFacetPageName', 'showEmptyFacets', 'hitFacetsListMode', 'hitFacetsList', 'sortModeFacets', 'hitFacetSortStrategy', 'facetTemplateDirectory'], true, false)</Display>
			</Functions>
		</Option>
		<Option id="hitFacetPageName" name="Destination page on click" isUrlEncoded="true" isEvaluated="true">
			<Description>Indicates the URL that must be accessed for a refinement option. If blank, you stay on the same page.</Description>
			<Functions>
				<ContextMenu>Pages()</ContextMenu>
			</Functions>
		</Option>
		<Option id="showEmptyFacets" name="Display empty facet" arity="ONE">
			<Description>Displays empty facets, that is to say, facets that do not have any categories.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="hitFacetsListMode" name="Facet list mode" arity="ONE">
			<Description>
				<![CDATA[
					Specifies the facet list filtering mode.<br />
					For the 'Exclude' and 'Include' modes, the 'Facet list' field allows to specify the metas to include or exclude.
				]]>
			</Description>
			<Values>
				<Value>No filtering</Value>
				<Value>Include</Value>
				<Value>Exclude</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('No filtering', ['hitFacetsList'], [], true, false)</Display>
			</Functions>
		</Option>
		<Option id="hitFacetsList" name="Facet list">
			<Description>The specified facets, separated by commas, will be either the only ones displayed ('Include' mode) or the only ones hidden ('Exclude' mode). Leaving the facet list empty iterates over all facets.</Description>
			<Functions>
				<ContextMenu>Facets()</ContextMenu>
				<ContextMenu>COMMON_appendOnChange(', ')</ContextMenu>
			</Functions>
		</Option>
		<Option id="sortModeFacets" name="Sort facets by">
			<Description>
				Sorts the facets using the selected method. Selecting anything but 'default' impacts performance.
			</Description>
			<Values>
				<Value>default</Value>
				<Value>description-asc</Value>
				<Value>description-desc</Value>
				<Value>shuffle</Value>
			</Values>
		</Option>
		<Option id="hitFacetSortStrategy" name="Sort categories by" arity="ONE">
			<Description>
				Sorts facet categories using the selected method. Selecting anything but 'default' impacts performance.
			</Description>
			<Values>
				<Value>default</Value>
				<Value>description-asc</Value>
				<Value>description-desc</Value>
				<Value>score-asc</Value>
				<Value>score-desc</Value>
				<Value>count-asc</Value>
				<Value>count-desc</Value>
				<Value>range-asc</Value>
				<Value>range-desc</Value>
				<Value>shuffle</Value>
			</Values>
		</Option>
		<Option id="facetTemplateDirectory" name="Facet JSP directory" arity="ONE">
			<Description>
				<![CDATA[
					Facet templates are stored in /templates/{Facet JSP directory}.<br />
					You can add sub-directories that match the facet path such as: top/language/facet.jsp
				]]>
			</Description>
			<Functions>
				<ContextMenu>JAVA_listDir('templates/', 'JSP base directory')</ContextMenu>
				<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
			</Functions>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Hit thumbnail">
		<Option id="showThumbnail" name="Display thumbnails" arity="ONE">
		  <Description>Displays a thumbnail in the first column of the table.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('false', [], ['useThumbnailPreview', 'urlDefaultThumbnail'], false, false)</Display>
			</Functions>
		</Option>
		<Option id="useThumbnailPreview" name="Use CloudView thumbnails" arity="ONE">
			<Description>If set to true, use the fetcher to retrieve CloudView's computed thumbnails.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="urlDefaultThumbnail" name="Default URL thumbnail" isEvaluated="true">
			<Description>Specifies the URL of the default thumbnail that will be displayed if there are no thumbnails available in the feed's hit. Leave this field blank to have default, MIME type dependent thumbnails.</Description>
		</Option>
		<Option id="tbHeight" name="Thumbnail Height" arity="ZERO_OR_ONE" isEvaluated="true">
			<Description>Specifies the height of the thumbnails (pixels). You must enter an integer.</Description>		
		</Option>
		<Option id="tbWidth" name="Thumbnail Width" arity="ZERO_OR_ONE" isEvaluated="true">
			<Description>Specifies the width of the thumbnails (pixels). You must enter an integer.</Description>		
		</Option>
	</OptionsGroup>

	<OptionsGroup name="General">
		<Option id="title" name="Widget title" isEvaluated="true">
			<Description>Widget title. If blank, no name is displayed.</Description>
		</Option>
		<Option id="summary" name="Table Summary" isEvaluated="true">
			<Description>This table summary will not be displayed in the user interface but it might be useful for accessibility.</Description>
		</Option>
		<Option id="wrapLimit" name="Wrap long strings">
			<Description>Defines the word wrap limit, that is to say the maximum number of characters before a line is broken and wrapped onto the next line. You must enter an integer.</Description>
			<Functions>
				<Check>isInteger</Check>
			</Functions>
		</Option>
		<OptionComposite id="columnTitle" name="Column title" arity="ZERO_OR_MANY">
			<Description>You can force a column title using this option.</Description>
			<Option id="name">
				<Placeholder>Meta name or facet ID</Placeholder>
				<Functions>
					<ContextMenu>Facets()</ContextMenu>
					<ContextMenu>Metas()</ContextMenu>
					<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
				</Functions>
			</Option>
			<Option id="title">
				<Placeholder>Column title</Placeholder>
				<Functions>
					<ContextMenu>COMMON_getI18N('${', '}')</ContextMenu>
				</Functions>
			</Option>
		</OptionComposite>
		<OptionComposite id="sortableMetas" name="Sort list" arity="ZERO_OR_MANY">
			<Description>
				<![CDATA[
					NOTE: Only metas that are of the cloudview type (int, date) can used as sort parameters.
				]]>
			</Description>
			<Option id="name">
				<Placeholder>Meta name</Placeholder>
				<Functions>
					<ContextMenu>Metas()</ContextMenu>
					<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
				</Functions>
			</Option>
			<Option id="metaName">
				<Placeholder>Sort name, memory or virtual fields</Placeholder>
				<Functions>
					<ContextMenu>Sorts()</ContextMenu>
					<ContextMenu>Fields()</ContextMenu>
					<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
				</Functions>
			</Option>
		</OptionComposite>
	</OptionsGroup>

	<OptionsGroup name="Advanced">
		<Option id="noResultsJspPathHit" name="Results Rendering" arity="ONE">
			<Description>If there are no results, the widget is either hidden using a trigger, or a message is displayed using the content of a JSP file.</Description>
			<Functions>
				<Check>isJspPath</Check>
			</Functions>
		</Option>
		<Option id="templateBasePath" name="Base path of the JSP templates" arity="ONE">
			<Description>You can replace the relative path by an absolute path like /WEB-INF/jsp/mydirectory/.</Description>
			<Functions>
				<Check>isDirectory</Check>
			</Functions>
		</Option>
	</OptionsGroup>

	<DefaultValues>
		<DefaultValue name="showHitMetas">true</DefaultValue>
		<DefaultValue name="hitUrlTarget">Current Page</DefaultValue>
		<DefaultValue name="showEmptyMetas">false</DefaultValue>
		<DefaultValue name="filterMetas">No filtering</DefaultValue>
		<DefaultValue name="sortModeMetas">default</DefaultValue>
		<DefaultValue name="metaUrlTarget">Current Page</DefaultValue>
		<DefaultValue name="showTitle">true</DefaultValue>
		<DefaultValue name="showContent">false</DefaultValue>
		<DefaultValue name="showScore">false</DefaultValue>
		<DefaultValue name="showHitFacets">true</DefaultValue>
		<DefaultValue name="showEmptyFacets">false</DefaultValue>
		<DefaultValue name="hitFacetsListMode">No filtering</DefaultValue>
		<DefaultValue name="sortModeFacets">default</DefaultValue>
		<DefaultValue name="hitFacetSortStrategy">default</DefaultValue>
		<DefaultValue name="facetTemplateDirectory">default</DefaultValue>
		<DefaultValue name="showThumbnail">false</DefaultValue>
		<DefaultValue name="useThumbnailPreview">false</DefaultValue>
		<DefaultValue name="showPreview">false</DefaultValue>
		<DefaultValue name="showDownload">false</DefaultValue>
		<DefaultValue name="noResultsJspPathHit">/WEB-INF/jsp/commons/noResults.jsp</DefaultValue>
		<DefaultValue name="templateBasePath">templates/</DefaultValue>
	</DefaultValues>
</Widget>
