<?xml version="1.0" encoding='UTF-8'?>
<Widget name="Multi Dimension Facet Builder" group="Miscellaneous" premium="true">

	<Description>This widget allows you to display MultiDimension facets, which use the categories generated by two or more other facets (any type, virtual or not, but one-dimensional only) to create
its own categories.</Description>
	
	<Preview>
		<![CDATA[
			<img src="/resources/widgets/multiDimensionFacetBuilder/images/preview.png" />
		]]>
	</Preview>
	
	<Dependencies>
		<Trigger position="self" className="com.exalead.cv360.searchui.view.widgets.triggers.MultiDimensionFacetBuilderTrigger" />
	</Dependencies>
	
	<Includes>
		<Include type="css" path="css/style.less" />
		<Include type="js" path="js/mdfb.js" />
	</Includes>

	<Platforms>
		<Platform type="web" supported="true" />
		<Platform type="mobile" supported="true" />
	</Platforms>

	<SupportWidgetsId arity="ZERO" />
	<SupportFeedsId arity="MANY" />
	
	<DefaultValues>
		<DefaultValue name="facetsListMode">No filtering</DefaultValue>
		<DefaultValue name="differentFacetsOnXY">false</DefaultValue>
		<DefaultValue name="facetsListMode_y">No filtering</DefaultValue>
		<DefaultValue name="facetType">multidimension</DefaultValue>
		<DefaultValue name="createAggr">false</DefaultValue>
	</DefaultValues>

	<OptionsGroup name="General">
		<Option id="title" name="Widget Title" isEvaluated="true">
			<Description>Widget title. If blank, no name is displayed.</Description>
		</Option>
		<Option id="facetId" name="Facet ID" arity="ONE">
			<Description>The ID of the matrix facet to create</Description>
		</Option>
		<Option id="facetType" name="Facet type" arity="ONE">
			<Description>The type of the matrix facet to create</Description>
			<Values>
				<Value>multidimension</Value>
				<Value>hierarchical2d</Value>
			</Values>
		</Option>
		<Option id="facetsListMode" name="Facet root list mode" arity="ONE">
			<Description>
				<![CDATA[
					Specifies the facet list filtering mode.<br />
					For the 'Exclude' and 'Include' modes, the 'Facet list' field allows to specify the metas to include or exclude.<br />
					Leaving facet root list empty forces iteration over all the facets independent of what mode is chosen.
				]]>
			</Description>
			<Values>
				<Value>No filtering</Value>
				<Value>Include</Value>
				<Value>Exclude</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_dependsOn('No filtering', ['facetsList'], false)</Display>
			</Functions>
		</Option>
		<Option id="facetsList" name="Facets list">
			<Description>The specified facets, separated by commas, will be either the only ones displayed ('Include' mode) or the only ones hidden ('Exclude' mode). Leaving the facet list empty iterates over all facets.</Description>
			<Functions>
				<ContextMenu>Facets()</ContextMenu>
				<ContextMenu>COMMON_appendOnChange(', ')</ContextMenu>
			</Functions>
		</Option>
		
		
		<Option id="differentFacetsOnXY" name="Facets are different on X and Y" arity="ZERO_OR_ONE">
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('true', [], ['facetsListMode_y', 'facetsList_y'], true, false)</Display>
			</Functions>
		</Option>
		<Option id="facetsListMode_y" name="Facet root list mode (y)" arity="ZERO_OR_ONE">
			<Description>
				<![CDATA[
					Specifies the facet list filtering mode.<br />
					For the 'Exclude' and 'Include' modes, the 'Facet list' field allows to specify the metas to include or exclude.<br />
					Leaving facet root list empty forces iteration over all the facets independent of what mode is chosen.
				]]>
			</Description>
			<Values>
				<Value>No filtering</Value>
				<Value>Include</Value>
				<Value>Exclude</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_dependsOn('No filtering', ['facetsList_y'], false)</Display>
			</Functions>
		</Option>
		<Option id="facetsList_y" name="Facets list (y)" arity="ZERO_OR_ONE">
			<Description>The specified facets, separated by commas, will be either the only ones displayed ('Include' mode) or the only ones hidden ('Exclude' mode). Leaving the facet list empty iterates over all facets.</Description>
			<Functions>
				<ContextMenu>NormalFacets()</ContextMenu>
				<ContextMenu>COMMON_appendOnChange(', ')</ContextMenu>
			</Functions>
		</Option>
		<OptionComposite id="extraParameters" name="MultiDimension options" arity="ZERO_OR_MANY" glue="##">
			<Description>
				<![CDATA[
					<ul>
						<li>option:'range' &nbsp; &nbsp; value:'2000,4000,Too expensive for you'</li>
						<li>option:'expr' &nbsp; &nbsp; value:'#int(10*#random())'</li>
					</ul>
				]]>
			</Description>
			<Option id="key">
				<Placeholder>option</Placeholder>
			</Option>
			<Option id="value">
				<Placeholder>value</Placeholder>
			</Option>
		</OptionComposite>
		
		<OptionComposite id="extraAxisParameters" name="Facet axis options" arity="ZERO_OR_MANY" glue="##">
			<Description>
				<![CDATA[
					<ul>
						<li>option:'aggr.avgCustomersTime' &nbsp; &nbsp; value:'AVG(customers*time_per_customer)'</li>
						<li>option:'range' &nbsp; &nbsp; value:'2000,4000,Too expensive for you'</li>
						<li>option:'expr' &nbsp; &nbsp; value:'#int(10*#random())'</li>
					</ul>
				]]>
			</Description>
			<Option id="axis">
				<description>Applies if the following facetId is present in the given axis.</description>
				<Values>
					<Value>x</Value>
					<Value>y</Value>
					<Value>x/y</Value>
				</Values>
			</Option>
			<Option id="facetId">
				<Placeholder>facetId</Placeholder>
			</Option>
			<Option id="key">
				<Placeholder>option</Placeholder>
			</Option>
			<Option id="value">
				<Placeholder>value</Placeholder>
			</Option>
		</OptionComposite>
	</OptionsGroup>
	
	<OptionsGroup name="Aggregation">
		<Option id="createAggr" name="Create aggregation" arity="ONE">
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('true', [], ['aggregationId', 'aggregations'], true, false)</Display>
			</Functions>
		</Option>
		<Option id="aggregationId" name="Aggregation ID" arity="ONE">
			<Description>The ID of the aggregation to create</Description>
		</Option>
		<OptionComposite id="aggregations" name="Aggregations" arity="MANY" glue="##">
			<Description>
				<![CDATA[
					<ul>
						<li>display name:'Average Customer time' &nbsp; &nbsp; expression:'AVG(customers*time_per_customer)'</li>
						<li>display name:'Range' &nbsp; &nbsp; expression:'2000,4000,Too expensive for you'</li>
						<li>display name:'Random' &nbsp; &nbsp; expression:'#int(10*#random())'</li>
					</ul>
				]]>
			</Description>
			<Option id="displayName">
				<Placeholder>display name</Placeholder>
			</Option>
			<Option id="expression">
				<Placeholder>expression</Placeholder>
			</Option>
		</OptionComposite>
	</OptionsGroup>
</Widget>
