<?xml version="1.0" encoding='UTF-8'?>
<Widget name="Advanced 2D Facet Table" group="Results Rendering" premium="true">

	<Description>Displays the categories of a given facet in a table that provides conditional formatting options to the end user.</Description>

	<StorageKeys>
		<StorageKey key="AdvancedTableConfigurations[]" resource="global" />
		<StorageKey optionId="storageKey" resource="user" />
	</StorageKeys>

	<Dependencies>
		<Widget name="advancedTable" />
	</Dependencies>
	
	<SupportI18N supported="true" />
	
	<Includes>
		<Include type="css" path="css/style.less" />
	</Includes>

	<Preview>
		<![CDATA[
			<div style="margin: 5px auto;">
				<table style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px; width:200px;" align="center">
					<tr style="background:#F4F4F4;">
						<th style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Thumbnail</th>
						<th style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Column 1</th>
						<th style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Column 2</th>
					</tr>
					<tr>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;"><img src="/resources/widgets/thumbnail/images/preview_thumbnail-unavailable.gif" width="60" /></td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Value A 1</td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Value A 2</td>
					</tr>
					<tr style="background-color:#D8FFED;">
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;"><img src="/resources/widgets/thumbnail/images/preview_thumbnail-unavailable.gif" width="60" /></td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Value B 1</td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Value B 2</td>
					</tr>
				</table>
			</div>
		]]>
	</Preview>

	<SupportWidgetsId arity="ZERO" />
	<SupportFeedsId arity="MANY" />
	
	<OptionsGroup name="General">
		<Option id="title" name="Widget title" isEvaluated="true">
			<Description>Widget title. If blank, no name is displayed.</Description>
		</Option>
		<Option id="facetId" name="Facet" arity="ONE">
			<Description>Facet used to populate the table.</Description>
			<Functions>
				<ContextMenu>Facets()</ContextMenu>
			</Functions>
		</Option>
				
		<Option id="aggregation" name="Aggregation" arity="ONE">
			<Description>Specifies the type of aggregation that will be displayed in the table cells.</Description>
			<Functions>
				<ContextMenu>Aggregations('facetId')</ContextMenu>
				<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
				<Check>isEmpty</Check>
			</Functions>
		</Option>
		<Option id="showRowNumber" name="Display the row number">
			<Description>Displays the row number in the first column.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="draggableColumn" name="Moveable columns">
			<Description>Sets the table columns as moveable so that they can be reordered by the user on the Mashup UI.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="enablePagination" name="Enable pagination">
			<Description>Enables pagination on the table. This is useful for long tables displaying many rows.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
			<Functions>
				<Display>ToggleDisplay({valueToMatch:'false', hideOptions:['paginationSize']})</Display>
			</Functions>
		</Option>
		<Option id="paginationSize" name="Pagination size">
			<Description>Number of visible rows per page.</Description>
			<Functions>
				<Check>isInteger</Check>
			</Functions>
		</Option>
		<Option id="enableColumnFilter" name="Enable show/hide columns" arity="ONE">
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="enableFormatter" name="Enable conditional formatting" arity="ONE">
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="enableSave" name="Enable save feature" arity="ONE">
			<Description>If the user is logged, conditional formatting and/or column order will be saved in the mashup builder storage otherwise in a browser cookie.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="enablePermalink" name="Enable permalink generation" arity="ONE">
			<Description>Permalink can be used to share customized table. (conditionnal formatting rules, column order...)</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="defaultConfigurationKey" name="Permalink storage key">
			<Description>Specifies the permalink storage key which identifies the default configuration. If blank, the end-user will not see the default configuration values in the table cells.</Description>
		</Option>
		<Option id="enableSort" name="Enable sort" isEvaluated="true">
			<Description>Enable sort</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
	</OptionsGroup>
	
	
	<OptionsGroup name="Storage">
		<Option id="storageKey" name="Storage key" arity="ZERO_OR_ONE">
			<Description>Specifies the key name for the local storage. It is used when the user is logged in to store his formatting preferences. Widgets with the same storage key will share the preferences.</Description>
		</Option>
	</OptionsGroup>
	
	<OptionsGroup name="Advanced">
		<Option id="noResultsJspPathHit" name="Results Rendering" arity="ONE">
			<Description>If there are no results, the widget is either hidden using a trigger, or a message is displayed using the content of a JSP file.</Description>
			<Functions>
				<Check>isJspPath</Check>
			</Functions>
		</Option>
	</OptionsGroup>

	<DefaultValues>		
		<DefaultValue name="noResultsJspPathHit">/WEB-INF/jsp/commons/noFacets.jsp</DefaultValue>
		
		<DefaultValue name="enablePagination">false</DefaultValue>
		<DefaultValue name="paginationSize">10</DefaultValue>
		
		<DefaultValue name="enableColumnFilter">true</DefaultValue>
		<DefaultValue name="enableFormatter">true</DefaultValue>
		<DefaultValue name="enableSave">true</DefaultValue>
		<DefaultValue name="enablePermalink">true</DefaultValue>
		<DefaultValue name="enableSort">true</DefaultValue>
		
		<DefaultValue name="storageKey">Advanced2DFacetTableConfiguration</DefaultValue>
	</DefaultValues>
</Widget>

