<?xml version="1.0" encoding='UTF-8'?>
<Widget name="Table Chart" group="Visualizations/Charts" premium="true">

	<Description>A table that behaves like a chart.</Description>

	<Preview>
		<![CDATA[
			<div style="margin: 5px auto;">
				<table style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px; width:200px;" align="center">
					<tr style="background:#F4F4F4;">
						<th style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;"></th>
						<th style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Series A</th>
						<th style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">Series B</th>
					</tr>
					<tr>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">category A</td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">42</td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">20</td>
					</tr>
					<tr>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">category B</td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">158</td>
						<td style="border:1px solid #D4DBDE; border-collapse:collapse; padding:2px;">80</td>
					</tr>
				</table>
			</div>
		]]>
	</Preview>

	<Includes>
		<Include type="css" path="/resources/highcharts/css/style.css" />
		<Include type="js" path="/resources/highcharts/js/excanvas.compiled.js" />
		<Include type="js" path="/resources/highcharts/js/highcharts.src.js" />
		<Include type="js" path="/resources/highcharts/js/highcharts.js" />
		<Include type="js" path="/resources/highcharts/js/tableChart.js" />
	</Includes>
	
<DefaultValues displayName="Normal" previewUrl="">
		<DefaultValue name="facetType">normal</DefaultValue>
		<DefaultValue name="strategy">compare</DefaultValue>
		<DefaultValue name="sortMode">default</DefaultValue>
		<DefaultValue name="basedOn">count##${facet.description} (count)</DefaultValue>
		<DefaultValue name="showOthers">true</DefaultValue>
		<DefaultValue name="defaultYValue">0</DefaultValue>
		<DefaultValue name="height">350</DefaultValue>
		<DefaultValue name="dataProcessor"><![CDATA[
function(data) {
	return data;
}
]]></DefaultValue>
	</DefaultValues>
	
	<DefaultValues displayName="Multi dimension" previewUrl="">
		<DefaultValue name="facetType">multi_dimension</DefaultValue>
		<DefaultValue name="strategy">compare</DefaultValue>
		<DefaultValue name="sortMode">default</DefaultValue>
		<DefaultValue name="basedOn">count##${category.description} (count)</DefaultValue>
		<DefaultValue name="showOthers">true</DefaultValue>
		<DefaultValue name="defaultYValue">0</DefaultValue>
		<DefaultValue name="height">350</DefaultValue>
		<DefaultValue name="dataProcessor"><![CDATA[
function(data) {
	return data;
}
]]></DefaultValue>
	</DefaultValues>
	
	<DefaultValues displayName="Hierarchical 2D" previewUrl="">
		<DefaultValue name="facetType">hierarchical_2d</DefaultValue>
		<DefaultValue name="strategy">compare</DefaultValue>
		<DefaultValue name="sortMode">default</DefaultValue>
		<DefaultValue name="basedOn">count##${category.description} (count)</DefaultValue>
		<DefaultValue name="showOthers">true</DefaultValue>
		<DefaultValue name="defaultYValue">0</DefaultValue>
		<DefaultValue name="height">350</DefaultValue>
		<DefaultValue name="dataProcessor"><![CDATA[
function(data) {
	return data;
}
]]></DefaultValue>
	</DefaultValues>

	<SupportWidgetsId arity="ZERO" />
	<SupportFeedsId arity="MANY" />
	<SupportI18N supported="true">
		<JsKeys>
			<JsKey>charts.nodata</JsKey>
		</JsKeys>
	</SupportI18N>

	<OptionsGroup name="General">
		<Option id="title" name="Widget title" arity="ZERO_OR_ONE" isEvaluated="true">
			<Description>Widget title. If blank, no name is displayed.</Description>
		</Option>
		<Option id="facetType" name="Facet type" arity="ONE">
			<Description>Specifies the facet type.</Description>
			<Values>
				<Value>auto</Value>
				<Value>normal</Value>
				<Value>multi_dimension</Value>
				<Value>hierarchical_2d</Value>
				<Value>legacy_2d</Value>
			</Values>
			<Functions>
				<Display>ToggleDisplay({valueToMatch:['normal','auto'], showOptions:['strategy']})</Display>
			</Functions>
		</Option>
		<Option id="facetsList" name="Facet name" arity="ONE">
			<Description>Specifies the facet to display in the column headers.</Description>		
			<Functions>
				<ContextMenu>Facets()</ContextMenu>
				<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
			</Functions>
		</Option>
		<OptionComposite id="basedOn" name="Y" arity="ONE" glue="##">
			<Option id="aggregations" name="Aggregation">
				<Description>Specifies the type of aggregations that will be used by the chart on the Y axis.</Description>
				<Functions>
					<ContextMenu>Aggregations('facetsList')</ContextMenu>
					<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
					<Check>isEmpty</Check>
				</Functions>
			</Option>
			<Option id="legend" name="Legend">
				<Description>Specifies the chart legend.</Description>
				<Functions>
					<ContextMenu>WIDGET_EvalFacet()</ContextMenu>
					<ContextMenu>WIDGET_EvalCategory()</ContextMenu>
				</Functions>
			</Option>
		</OptionComposite>
		<Option id="strategy" name="Merge or compare feeds" arity="ONE">
			<Description>The chart can gather several feeds using the same facets. You can either choose to 'merge' or 'compare' feed values.</Description>		
			<Values>
				<Value>compare</Value>
				<Value>merge</Value>
			</Values>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Advanced">
		<Option id="sortMode" name="Sort categories by" arity="ONE">
			<Description>
				Sorts facet categories using the selected method. Selecting anything but 'default' impacts performance.
			</Description>
			<Values>
				<Value>default</Value>
				<Value>description-asc</Value>
				<Value>description-desc</Value>
				<Value>description-num-asc</Value>
				<Value>description-num-desc</Value>
				<Value>description-range-asc</Value>
				<Value>description-range-desc</Value>
				<Value>value-asc</Value>
				<Value>value-desc</Value>
			</Values>
		</Option>
		<Option id="nbSubFacets" name="Max number of categories">
			<Description>Specifies the maximum number of facet categories to display. You must enter an integer.</Description>
			<Functions>
				<Check>isInteger</Check>
			</Functions>
		</Option>
		<Option id="showOthers" name="Show 'Others' group">
			<Description>Display or not the 'Others' category group.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="defaultYValue" name="Default Y value">
			<Description>Specifies the default Y value. You must enter an integer or leave it empty.</Description>
			<Functions>
				<Check>isInteger</Check>
			</Functions>
		</Option>
		<Option id="facetPageName" name="Destination page on click" isUrlEncoded="true" isEvaluated="true">
			<Description>Indicates the URL that must be accessed for a refinement option. If blank, you stay on the same page.</Description>
			<Functions>
				<ContextMenu>Pages()</ContextMenu>
			</Functions>
		</Option>
		<Option id="forceRefineOnFeeds" name="Force refinement for feeds" arity="ZERO_OR_MANY">
			<Description>Forces refinements on the specified feeds.</Description>
			<Functions>
				<ContextMenu>Feeds()</ContextMenu>
				<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
			</Functions>
		</Option>
	</OptionsGroup>
	
	<OptionsGroup name="Data processor">
		<Description>The Data Processor allows you to manipulate the json before its execution. Be careful, some properties of the data object may be overridden by the ones set in the Javascript tab.</Description>
		<Option id="dataProcessor" name="Javascript function">
			<Description>Lets you define the Javascript function that will be executed on data  before the Highcharts processing. </Description>		
            <Functions>
                <Display>SetType('code', 'js')</Display>
            </Functions>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Style">
		<Option id="width" name="Width">
			<Description>Specifies the width of the widget (pixels). You must enter an integer.</Description>
			<Functions>
				<Check>isInteger</Check>
			</Functions>
		</Option>
		<Option id="height" name="Height" arity="ONE">
			<Description>Specifies the height of the widget (pixels). You must enter an integer.</Description>
			<Functions>
				<Check>isInteger</Check>
			</Functions>
		</Option>
	</OptionsGroup>
</Widget>
