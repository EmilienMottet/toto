<?xml version="1.0" encoding='UTF-8'?>
<Widget name="Result List" group="Results Rendering">

	<Description>This widget displays the search results in a list view. Each result (or hit) is displayed in a pane displaying a title and N given metas depending on your data model configuration. </Description>

	<Includes>
		<Include type="css" path="css/style.less" />
		<Include type="js" path="/resources/javascript/exa/io/io.js" />
	</Includes>

	<Preview>
		<![CDATA[
			<div>
				<table>
					<tr>
						<td width="70" style="padding:5px;"><img src="/resources/widgets/thumbnail/images/preview_thumbnail-unavailable.gif" width="60" /></td>
						<td style="text-align:left;">
							<h3>Title</h3>
							<br />
							<span style="font-weight:bold; color:#707070;">metaA:</span> valueA<br />
							<span style="font-weight:bold; color:#707070;">metaB:</span> valueB<br />
							<span style="font-weight:bold; color:#707070;">metaC:</span> valueC<br />
						</td>
					</tr>
				</table>
			</div>
		]]>
	</Preview>
	
	<Dependencies>
		<!-- Widget dependencies will be include if showThumbnail is equals to one of these values -->
		<Widget name="thumbnail" includeCondition="showThumbnail=on the left,showThumbnail=on the right" />
		<Widget name="preview" includeCondition="showPreview=true" />
		<Widget name="download" includeCondition="showDownload=true" />
	</Dependencies>

	<SupportWidgetsId arity="ZERO_OR_MANY" label="For each hit" />
	<SupportFeedsId arity="MANY" />
	<SupportI18N supported="true" />
	
	<Interactions>
		<Interaction type="in" id="exa.io.HitDecorationInterface">
			<Description>Decorate your hit.</Description>
			<Option id="hitDecorationCssSelector" name="Css path" arity="ONE">
				<Description>
				<![CDATA[
					CSS path where the decoration will be appended in the hit display.<br />
					Generally the default value does not need to be changed for the standard hit display widget.
				]]>
				</Description>
				<Functions>
					<ContextMenu>COMMON_add('Default template', [{display:'Header left',value:'li.${entry:cleanId(entry)} .rounded-top'}, ])</ContextMenu>
					<ContextMenu>Eval()</ContextMenu>
				</Functions>
			</Option>
			<Option id="hitDecorationPosition" name="Decoration position" arity="ONE">
				<Description>
				<![CDATA[
					The decoration will be appended or prepended.
				]]>
				</Description>
				<Values>
					<Value></Value>
					<Value>append</Value>
					<Value>prepend</Value>
				</Values>
			</Option>
		</Interaction>
	</Interactions>

	<OptionsGroup name="Hit config">
		<Option id="hitTitle" name="Hit title" isEvaluated="true">
			<Description>Specifies the title displayed for each hit. Leave blank to use the &lt;i&gt;Title&lt;/i&gt; defined in the source feed. </Description>
		</Option>
		<Option id="hitUrl" name="Hit URL" isUrlEncoded="true" isEvaluated="true">
			<Description>Specifies the link to create for each hit title.</Description>
			<Functions>
				<ContextMenu>Pages()</ContextMenu>
				<Display>PARAMETER_doHide('', ['hitUrlTarget'], [], true, false)</Display>
			</Functions>
		</Option>
		<Option id="hitUrlTarget" name="Hit URL Target">
			<Description>Specifies where to open the action for each Hit URL.</Description>
			<Values>
				<Value>Current Page</Value>
				<Value>New Page</Value>
			</Values>
		</Option>
		<Option id="showHitIcon" name="Display hit icon" arity="ONE">
			<Description>Displays the icons of documents (reflects the document MIME type).</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="showHitId" name="Display hit ID" arity="ONE">
			<Description>Displays the hit ID.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="showTextOnTop" name="Display hit content" arity="ONE">
			<Description>Displays the hit content.</Description>
			<Functions>
				<Display>PARAMETER_doHide('true', [], ['showTextOnTopTruncate'])</Display>
			</Functions>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="showTextOnTopTruncate" name="Truncate hit content">
			<Description>Truncates the hit content if the number of characters exceeds the given value (default is 500).</Description>
			<Functions>
				<Check>isInteger</Check>
			</Functions>
		</Option>
		<Option id="showPreview" name="Display hit preview">
			<Description>Displays the link to CloudView's document preview feature.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="showDownload" name="Display hit download">
			<Description>Displays the link to CloudView's document download feature.</Description>
			<Functions>
				<Display>ToggleDisplay({ valueToMatch: 'true', showOptions: ['downloadInline']})</Display>
			</Functions>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="downloadInline" name="Inlined download">
			<Description>Sets to "true" if it is intended to be displayed automatically by the browser.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="similarUrl" name="Similar hits URL" arity="ZERO_OR_ONE" isUrlEncoded="true" isEvaluated="true">
			<Description>Specifies an URL that will display similar hits.</Description>
			<Functions>
				<ContextMenu>PageParameters()</ContextMenu>
				<ContextMenu>Pages()</ContextMenu>
			</Functions>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Hit metas">
		<Option id="showHitMetas" name="Display metas" arity="ONE">
			<Description>Displays metas in the hit content.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('true', [], ['customDisplay', 'metaUrlTarget', 'showEmptyMetas', 'filterMetas', 'metas', 'customMetasDisplay', 'sortModeMetas'], true, false)</Display>
			</Functions>
		</Option>
		<Option id="customDisplay" name="Custom meta display" arity="ONE">
			<Description>Customizes the meta display with your specifications.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('false', ['customMetasDisplay'], ['metaUrlTarget', 'showEmptyMetas', 'filterMetas', 'metas', 'sortModeMetas'], true, false)</Display>
			</Functions>
		</Option>
		<Option id="customMetasDisplay" name="Custom HTML" isEvaluated="true">
			<Description>Specifies the HTML to use to display the hit metas.</Description>
			<Functions>
				<Display>PARAMETER_doResize({ minHeight: 10 })</Display>
				<Display>SetType('code', 'html')</Display>
			</Functions>
		</Option>
		<Option id="metaUrlTarget" name="Meta URL Target" isUrlEncoded="true">
			<Description>Specifies where to open metas with URLs.</Description>
			<Values>
				<Value>Current Page</Value>
				<Value>New Page</Value>
			</Values>
		</Option>
		<Option id="showEmptyMetas" name="Display empty metas" arity="ONE">
			<Description>Displays the names of metas with no (or empty) values.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="filterMetas" name="Meta filtering method" arity="ONE">
			<Description>Specifies the filtering method to apply to the metas. For the 'Exclude'and 'Include' methods, the 'Meta list' field allows to specify the metas to include or exclude.</Description>
			<Values>
				<Value>No filtering</Value>
				<Value>Exclude</Value>
				<Value>Include</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('No filtering', ['metas'], [], true, false)</Display>
			</Functions>
		</Option>
		<Option id="metas" name="Meta list">
			<Description>The specified metas, separated by commas, will be either the only ones displayed ('Include' method) or the only ones hidden ('Exclude' method).</Description>
			<Functions>
				<ContextMenu>Metas()</ContextMenu>
				<ContextMenu>COMMON_appendOnChange(', ')</ContextMenu>
			</Functions>
		</Option>
		<Option id="sortModeMetas" name="Meta sort method">
			<Description>Specifies how metas will be sorted.</Description>
			<Values>
				<Value>default</Value>
				<Value>description-asc</Value>
				<Value>description-desc</Value>
				<Value>shuffle</Value>
			</Values>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Hit facets">
		<Option id="showHitFacets" name="Display facets" arity="ONE">
			<Description>Displays facets in the hit content.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('true', [], ['hitFacetPageName', 'showEmptyFacets', 'hitFilterFacetsType', 'hitFacetsList', 'hitFacetSortStrategy', 'sortModeFacets'], true, false)</Display>
			</Functions>
		</Option>
		<Option id="hitFacetPageName" name="Destination page on click" isUrlEncoded="true" isEvaluated="true">
			<Description>Indicates the URL that must be accessed for a refinement option. If blank, you stay on the same page.</Description>
			<Functions>
				<ContextMenu>Pages()</ContextMenu>
			</Functions>
		</Option>
		<Option id="showEmptyFacets" name="Display empty facet">
			<Description>Displays empty facets, that is to say, facets that do not have any categories.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="hitFilterFacetsType" name="Facet list mode" arity="ONE">
			<!-- Named facetListMode in other widgets - name kept for compatibility reasons -->
			<Description>
				<![CDATA[
					Specifies the facet list filtering mode.<br />
					For the 'Exclude' and 'Include' modes, the 'Facet list' field allows to specify the metas to include or exclude.
				]]>
			</Description>
			<Values>
				<Value>No filtering</Value>
				<Value>Include</Value>
				<Value>Exclude</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('No filtering', ['hitFacetsList'], [], true, false)</Display>
			</Functions>
		</Option>
		<Option id="hitFacetsList" name="Facet list">
			<Description>The specified facets, separated by commas, will be either the only ones displayed ('Include' mode) or the only ones hidden ('Exclude' mode). Leaving the facet list empty iterates over all facets.</Description>
			<Functions>
				<ContextMenu>Facets()</ContextMenu>
				<ContextMenu>COMMON_appendOnChange(', ')</ContextMenu>
			</Functions>
		</Option>
		<Option id="sortModeFacets" name="Sort facets by">
			<Description>Sorts the facets using the selected method. Selecting anything but 'default' impacts performance.</Description>
			<Values>
				<Value>default</Value>
				<Value>description-asc</Value>
				<Value>description-desc</Value>
				<Value>shuffle</Value>
			</Values>
		</Option>
		<Option id="hitFacetSortStrategy" name="Sort categories by" arity="ONE">
			<Description>
				<![CDATA[
					Sorts the categories using the selected method. Selecting anything but 'default' impacts performance.<br />
					<ul>
						<li>'default' requires no processing.</li>
						<li>'shuffle', 'desc*' impact performance on the server side.</li>
					</ul>
				]]>
			</Description>
			<Values>
				<Value>default</Value>
				<Value>description-asc</Value>
				<Value>description-desc</Value>
				<Value>range-asc</Value>
				<Value>range-desc</Value>
				<Value>shuffle</Value>
			</Values>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Hit thumbnail">
		<Option id="showThumbnail" name="Display thumbnails" arity="ONE">
			<Description>Defines where hit thumbnails are displayed.</Description>
			<Values>
				<Value>on the left</Value>
				<Value>on the right</Value>
				<Value>none</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('none', [], ['useThumbnailPreview', 'urlDefaultThumbnail', 'tbHeight', 'tbWidth'], false, false)</Display>
			</Functions>
		</Option>
		<Option id="useThumbnailPreview" name="Use CloudView thumbnails" arity="ONE">
			<Description>If set to true, use the fetcher to retrieve CloudView's computed thumbnails.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
		<Option id="urlDefaultThumbnail" name="Default URL thumbnail" isEvaluated="true">
			<Description>This thumbnail is displayed if there are no thumbnails available in the feed's hit. Leave this field blank to have default, MIME type dependent thumbnails.</Description>
		</Option>
		<Option id="tbHeight" name="Thumbnail Height" arity="ZERO_OR_ONE" isEvaluated="true">
			<Description>Specifies the height of the thumbnails (pixels). You must enter an integer.</Description>		
		</Option>
		<Option id="tbWidth" name="Thumbnail Width" arity="ZERO_OR_ONE" isEvaluated="true">
			<Description>Specifies the width of the thumbnails (pixels). You must enter an integer.</Description>		
		</Option>
		<Option id="mainContainerId" name="On-scroll loading container id" isEvaluated="true">
			<Description>if set, on scroll-loading will be applied to the specific container instead of the entire window. You must set the css id of a scrollable element.</Description>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Hit templates">
		<Option id="customJspPathHit" name="Hit JSP template" arity="ZERO_OR_ONE" isEvaluated="true">
			<Description>
				<![CDATA[
					Specifies the JSP template to use.<br />
					Using variables for finding a valid template is useful if you want to customize hit display based for example, on the TYPE.<br />
					Hit templates are in /WEB-INF/jsp/widgets/displayHits/templates/.
				]]>
			</Description>
			<Functions>
				<Check>isJspPath</Check>
				<ContextMenu>JAVA_listFiles('templates/', '*/default.jsp', 'JSP base templates')</ContextMenu>
				<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
			</Functions>
		</Option>
		<Option id="defaultJspPathHit" name="Default template (mandatory)" arity="ONE">
			<Description>
				<![CDATA[
					Defines the default template to use when the Hit JSP template does not exist or is not defined.<br />
					For example, when no custom template for the current TYPE has been found.<br />
					The hit templates are in the 'templates' base path.
				]]>
			</Description>
			<Functions>
				<Check>isJspPath</Check>
				<ContextMenu>JAVA_listFiles('templates/', '*/default.jsp', 'JSP base templates')</ContextMenu>
				<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
			</Functions>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="General">
		<Option id="title" name="Widget Title" isEvaluated="true">
			<Description>Widget title. If blank, no name is displayed.</Description>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Advanced">
		<Option id="noResultsJspPathHit" name="JSP path to use if no results" arity="ONE">
			<Description>If there are no results, the widget is either hidden using a trigger, or a message is displayed using the content of a JSP file.</Description>
			<Functions>
				<Check>isJspPath</Check>
			</Functions>
		</Option>
		<Option id="templateBasePath" name="Base path of the JSP templates" arity="ONE">
			<Description>You can replace the relative path by an absolute path like /WEB-INF/jsp/mydirectory/.</Description>
			<Functions>
				<Check>isDirectory</Check>
			</Functions>
		</Option>
		<Option id="forceRefineOnFeeds" name="Force refinement for feeds" arity="ZERO_OR_MANY">
			<Description>Forces refinements on the specified feeds.</Description>
			<Functions>
				<ContextMenu>Feeds()</ContextMenu>
				<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
			</Functions>
		</Option>
	</OptionsGroup>

	<DefaultValues>
		<DefaultValue name="showHitMetas">true</DefaultValue>
		<DefaultValue name="hitUrlTarget">Current Page</DefaultValue>
		<DefaultValue name="filterMetas">No filtering</DefaultValue>
		<DefaultValue name="customDisplay">false</DefaultValue>
		<DefaultValue name="sortModeMetas">default</DefaultValue>
		<DefaultValue name="metaUrlTarget">Current Page</DefaultValue>
		<DefaultValue name="showHitIcon">true</DefaultValue>
		<DefaultValue name="showHitId">true</DefaultValue>
		<DefaultValue name="showTextOnTop">true</DefaultValue>
		<DefaultValue name="showTextOnTopTruncate">500</DefaultValue>
		<DefaultValue name="defaultJspPathHit">default/default.jsp</DefaultValue>
		<DefaultValue name="showHitFacets">true</DefaultValue>
		<DefaultValue name="showEmptyFacets">false</DefaultValue>
		<DefaultValue name="hitFilterFacetsType">No filtering</DefaultValue>
		<DefaultValue name="sortModeFacets">default</DefaultValue>
		<DefaultValue name="hitFacetSortStrategy">default</DefaultValue>
		<DefaultValue name="showThumbnail">on the left</DefaultValue>
		<DefaultValue name="useThumbnailPreview">true</DefaultValue>
		<DefaultValue name="showPreview">true</DefaultValue>
		<DefaultValue name="showDownload">true</DefaultValue>
		<DefaultValue name="noResultsJspPathHit">/WEB-INF/jsp/commons/noResults.jsp</DefaultValue>
		<DefaultValue name="templateBasePath">templates/</DefaultValue>
	</DefaultValues>
</Widget>
