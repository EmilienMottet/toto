<?xml version="1.0" encoding='UTF-8'?>
<Widget name="Query History" group="Navigation" premium="true">

	<Description>Provides a breadcrumb trail for navigation with the most recent queries.</Description>

	<Preview>
	<![CDATA[
		<img src="/resources/widgets/navigationHistory/images/preview.png" alt="Navigation History" />
	]]>
	</Preview>

	<SupportWidgetsId arity="ZERO" />
	<SupportFeedsId arity="ZERO_OR_ONE" />

	<Includes>
		<Include type="css" path="css/style.less" />
		<Include type="js" path="js/history.js" />
		<Include type="js" path="/resources/javascript/storage/storage-client-0.2.js" />
		<Include type="js" path="/resources/javascript/jquery.cookie.js" />
		<Include type="js" path="/resources/javascript/jquery.json-2.2.js" />
	</Includes>

	<StorageKeys>
		<StorageKey optionId="storageKey" resource="user" />
	</StorageKeys>

	<OptionsGroup name="General">
		<Option id="title" name="Widget title" isEvaluated="true">
			<Description>Widget title. If blank, no name is displayed.</Description>		
		</Option>
		<Option id="label" name="Label" arity="ONE" isEvaluated="true">
			<Description>History label</Description>
		</Option>
		<Option id="storageMethod" name="Persistance through" arity="ONE">
			<Description>Changes how the history is stored, "Cookie" or "Storage". For "Storage", the user needs to be logged in (and security enabled).</Description>
			<Values>
				<Value>Cookie</Value>
				<Value>Storage</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('Cookie', ['storageKey'], ['jsonCookieName'], true, false)</Display>
			</Functions>
		</Option>
		<Option id="jsonCookieName" name="Cookie name" arity="ONE">
			<Description>Specifies the name of the cookie on which the query data is stored.</Description>			
		</Option>
		<Option id="storageKey" name="Storage Key" arity="ONE">
			<Description>Specifies the key on which the data is stored in the database.</Description>
		</Option>
		<Option id="jsonCookieSize" name="History size" arity="ONE">
			<Description>Specifies the number of queries to store. Enter an integer.</Description>		
			<Functions>
				<Check>isInteger</Check>
			</Functions>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Advanced">
		<Option id="showHistory" name="Show History">
			<Description>Shows the history. Set this option to false if you just want to save a search without showing the history.</Description>
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
			<Functions>
				<Display>PARAMETER_doHide('true', [], ['separator', 'displayStyle', 'invertHistoryOrder'], true, false)</Display>
			</Functions>
		</Option>
		<Option id="separator" name="Separator" arity="ZERO_OR_ONE">
			<Description>Specifies the separator to use between queries. It is recommended to use a separator when the 'breadcrumb' option is selected for the 'Display style' property. </Description>		
		</Option>
		<Option id="displayStyle" name="Display style" arity="ONE">
			<Description>Specifies whether to display the query history as breadcrumbs or as a vertical list.</Description>			
			<Values>
				<Value>breadcrumb</Value>
				<Value>list</Value>
			</Values>
		</Option>
		<Option id="invertHistoryOrder" name="Invert history order" arity="ONE">
			<Description>By default, the query history is displayed chronologically. Set this option to 'true' if you want to invert this order</Description>			
			<Values>
				<Value>false</Value>
				<Value>true</Value>
			</Values>
		</Option>
	</OptionsGroup>

	<DefaultValues>
		<DefaultValue name="separator">&gt;</DefaultValue>
		<DefaultValue name="label">Search for '${feed.q}'</DefaultValue>
		<DefaultValue name="storageMethod">Cookie</DefaultValue>
		<DefaultValue name="jsonCookieName">history</DefaultValue>
		<DefaultValue name="storageKey">NavigationHistoryWidget</DefaultValue>
		<DefaultValue name="jsonCookieSize">10</DefaultValue>
		<DefaultValue name="showHistory">true</DefaultValue>
		<DefaultValue name="displayStyle">breadcrumb</DefaultValue>
		<DefaultValue name="invertHistoryOrder">false</DefaultValue>
	</DefaultValues>
</Widget>
