<?xml version="1.0" encoding='UTF-8'?>
<Widget name="Timeline Area Range" group="Visualizations/Charts" premium="true">

	<Description>Timeline Area Range.</Description>
	
	<Preview>
		<![CDATA[
			<img src="/resources/highcharts/images/preview_timelinerangechart.png" alt="Timeline Range" />
		]]>
	</Preview>

	<Platforms>
		<Platform type="web" supported="true" />
		<Platform type="mobile" supported="true" />
	</Platforms>

	<Includes>
		<Include type="css" path="/resources/highcharts/css/style.css" />
		<Include type="js" path="/resources/highcharts/js/highcharts.src.js" />
		<Include type="js" path="/resources/highcharts/js/highcharts-more.js" />
		<Include type="js" path="/resources/highcharts/js/highcharts.js" />		
	</Includes>

	<SupportWidgetsId arity="ZERO" />
	<SupportFeedsId arity="MANY" />
	<SupportI18N supported="true">
		<JsKeys>
			<JsKey>charts.nodata</JsKey>
		</JsKeys>
	</SupportI18N>

	<DefaultValues displayName="Normal" previewUrl="">
		<DefaultValue name="facetType">normal</DefaultValue>
		<DefaultValue name="strategy">compare</DefaultValue>
		<DefaultValue name="serieLegend">${feed.id}</DefaultValue>
		<DefaultValue name="height">350</DefaultValue>
		<DefaultValue name="dataProcessor"><![CDATA[
function(data) {
	return data;
}
]]></DefaultValue>
	</DefaultValues>

	<DefaultValues displayName="Hierarchical 2D" previewUrl="">
		<DefaultValue name="facetType">hierarchical_2d</DefaultValue>
		<DefaultValue name="serieLegend">${category.description}</DefaultValue>
		<DefaultValue name="height">350</DefaultValue>
		<DefaultValue name="dataProcessor"><![CDATA[
function(data) {
	return data;
}
]]></DefaultValue>
	</DefaultValues>
	
	<OptionsGroup name="General">
		<Option id="title" name="Widget title" arity="ZERO_OR_ONE" isEvaluated="true">
			<Description>Widget title. If blank, no title is displayed.</Description>
		</Option>
		<Option id="facetType" name="Facet type" arity="ONE">
			<Description>Specifies the facet type.</Description>
			<Values>
				<Value>auto</Value>
				<Value>normal</Value>
				<Value>hierarchical_2d</Value>
				<Value>legacy_2d</Value>
			</Values>
			<Functions>
				<Display>ToggleDisplay({valueToMatch:['normal','auto'], showOptions:['strategy']})</Display>
			</Functions>
		</Option>
		<Option id="facetsList" name="Facet list" arity="ONE">
			<Functions>
				<ContextMenu>Facets()</ContextMenu>
				<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
			</Functions>
		</Option>
		<Option id="aggregationMin" name="Aggregation min">
			<Description>Specifies an aggregation for the low range</Description>
			<Functions>
				<ContextMenu>Aggregations('facetsList')</ContextMenu>
				<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
				<Check>isEmpty</Check>
			</Functions>
		</Option>
		<Option id="aggregationMax" name="Aggregation max">
			<Description>Specifies an aggregation for the high range.</Description>
			<Functions>
				<ContextMenu>Aggregations('facetsList')</ContextMenu>
				<ContextMenu>COMMON_emptyOnChange()</ContextMenu>
				<Check>isEmpty</Check>
			</Functions>
		</Option>
		<Option id="strategy" name="Merge or compare feeds" arity="ONE">
			<Description><![CDATA[The chart can gather several feeds using the same facets. You can either choose to 'merge' or 'compare' feed values. Note that you can only merge <i>count</i> aggregation.]]></Description>		
			<Values>
				<Value>compare</Value>
				<Value>merge</Value>
			</Values>
		</Option>
		<Option id="serieLegend" name="Series legend">
			<Description>Legend for the series</Description>
			<Functions>
				<ContextMenu>Eval()</ContextMenu>
			</Functions>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="JavaScript">
		<Option id="opts" name="JavaScript options" arity="ONE" isEvaluated="true">
			<Description>Lets you customize some javascript options used by the Highcharts library. Your javascript options will overwrite the default ones. For example, it can be useful to redirect clicks on pages. </Description>		
			<Values>
				<Value><![CDATA[{
	/*colors: ['#4572A7', '#AA4643', '#89A54E', '#80699B', '#3D96AE', '#DB843D', '#92A8CD', '#A47D7C', '#B5CA92'],*/
	/*colors: ['#058DC7', '#50B432', '#ED561B', '#DDDF00', '#24CBE5'],*/
	chart: {
		type: 'arearange',
		zoomType: 'xy'
	},
	title: {
		text: null
	},
	credits: {
		enabled: false
	},
	legend: {
		margin: 20,
		borderWidth: 0,
		layout: 'horizontal',
		itemWidth: 150
	},
	xAxis: {
		type:"datetime",
		labels: {
			rotation: -45,
			align: 'right'
		}
	},	
	tooltip: {
		backgroundColor: '#222',
		borderWidth: 0,
		style: {
			color: '#fff'
		},
		useHTML: true,
		valueDecimals: 2
	},
	plotOptions: {
		series: {
            turboThreshold: 0,
			events: {
				click: function(e) {
					if (e.point.r) {
						exa.redirect(buildUrl(this.options.baseUrl, e.point.r));
					}
				}
			}
		}
	}
}
]]></Value>
			</Values>
			<Functions>
				<Display>SetType('code', 'js')</Display>
			</Functions>
		</Option>
	</OptionsGroup>


	<OptionsGroup name="Data processor">
		<Description>The Data Processor allows you to manipulate the json before its execution. Be careful, some properties of the data object may be overridden by the ones set in the Javascript tab.</Description>
		<Option id="dataProcessor" name="Javascript function">
			<Description>Lets you define the Javascript function that will be executed on data  before the Highcharts processing. </Description>		
			<Functions>
				<Display>SetType('code', 'js')</Display>
			</Functions>
		</Option>
	</OptionsGroup>

	<OptionsGroup name="Style">
		<Option id="width" name="Width">
			<Description>Specifies the width of the widget (pixels). You must enter an integer.</Description>
			<Functions>
				<Check>isInteger</Check>
			</Functions>
		</Option>
		<Option id="height" name="Height" arity="ONE">
			<Description>Specifies the height of the widget (pixels). You must enter an integer.</Description>
			<Functions>
				<Check>isInteger</Check>
			</Functions>
		</Option>
	</OptionsGroup>
</Widget>
